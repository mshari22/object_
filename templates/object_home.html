<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>OBJECT - الخريطة الحية</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body { font-family: sans-serif; margin: 0; background: #f4f7f6; }
        .nav { background: #1a1a1a; padding: 20px; display: flex; justify-content: space-around; align-items: center; color: white; }
        .nav a { color: white; text-decoration: none; font-weight: bold; }
        #map { height: 450px; width: 95%; margin: 20px auto; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .footer { background: #1a1a1a; color: white; padding: 40px; text-align: center; }
        .btn { padding: 12px 25px; border-radius: 25px; text-decoration: none; color: white; font-weight: bold; display: inline-block; margin: 5px; }
        .whatsapp { background: #25D366; } .snap { background: #FFFC00; color: black; }
    </style>
</head>
<body>
<div class="nav">
    <h2>OBJECT</h2>
    <a href="/">الرئيسية</a>
    <a href="/add">+ أضف عقار</a>
    <a href="/login">Login</a>
</div>
<div id="map"></div>
<div class="footer">
    <h3>تواصل معنا</h3>
    <a href="https://wa.me/966590192582" class="btn whatsapp">واتساب</a>
    <a href="https://www.snapchat.com/add/idmsr1" class="btn snap">سناب شات</a>
</div>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    var map = L.map('map').setView([24.7136, 46.6753], 11);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
    var locations = {{ map_data | safe }};
    locations.forEach(function(l) {
        if(l.lat && l.lng) { L.marker([l.lat, l.lng]).addTo(map).bindPopup(l.title + " - " + l.price + " ريال"); }
    });
</script>
</body>
</html>